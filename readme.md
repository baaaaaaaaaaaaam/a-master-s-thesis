#  경마 예측 프로그램 

### selenium 
> 한국 마사회에서 제공하는 경주마, 기수, 조교수 데이터를 크롤링하기 위한 파일
- 기간 : 20180806 ~ 20231231
- race.py :  경주 기록실에서 크롤링한 데이터를 DB에 저장
- jockey : 기수 정보에서 크롤링한 데이터를 DB에 저장
- horse : 경주마 정보에서 크롤링한 데이터를 DB에 저장
- trainer : 조교사 정보에서 클로링한 데이테를 DB에 저장
- 위에서 크롤링한 정보를 db 에 저장하고, 해당 db에서 쿼리를 사용하여 가져온 데이터가 total.csv이다.


### ML
> 경주마, 기수, 조교사의 이전기록들을 계산하여 경주의 우승마를 예측한다

경마는 총 7가지 승리 방식이 존재한다. 이 중 단승식을 예측하려 한다. 한 경기에 7~10마리의 말이 출전을 하고 이중 1마리만 승리하기때문에 산술적인 확률은 1/10이다. 위 예측 모델을 사용하여 33~35% 성능을 얻엇다.
* 단승식 : 선택한 말 1마리가 1등으로 들어온다.
* 연승식 : 선택한 말 1마리가 순서 상관없이 3등안에 들어온다
* 복승식 : 선택한 말 2마리가 순서 상관없이 2등안에 들어온다
* 복연승식 : 선택한 말 2마리가 순서 상관없이 3등안에 들어온다.
* 삼복승식 : 선택한 말 3마리가 순서 상관업싱 3등안에 들어온다
* 쌍승식 : 1,2,등 순서를 맞춘다
* 삼쌍승식 : 1,2,3등 순서를 맞춘다

> 개발 플로우
1. app.py 를 실행하면 main()에서 데이터 전처리가 발생하고, 전처리한 데이터를 저장한다 ( 꽤 오래걸림 )
2. play() 에서 저장한 csv를 불러와 min/max 스케일링한다.
3. 학습에 사용될 변수를 선택한다. 
4. train데이터를 3-fold 하여 최적의 파라미터를 찾는다
5. 최적의 파마리터와 train데이터를 사용하여 normal모델을 만든다.
6. 만든 모델의 성능을 측정하고, 다중공성선을 활용하여 변수를 제거한다.
7. 남은 변수를 활용하여 베스트 모델을 생성한다.
8. 성능 측정한다.
